@code {
    [Parameter]
    public DateTime NextPromotionDate { get; set; }

    private double ProgressPercentage => CalculateProgressPercentage();
    private int OverdueDays => CalculateOverdueDays();

    private double CalculateProgressPercentage()
    {
        DateTime startDate = NextPromotionDate.AddDays(-56); // 8 weeks before the next promotion date
        DateTime currentDate = DateTime.Now;

        double totalDuration = (NextPromotionDate - startDate).TotalDays;
        double elapsedDuration = (currentDate - startDate).TotalDays;

        double percentage = (elapsedDuration / totalDuration) * 100;
        return Math.Max(0, Math.Min(percentage, 100)); // Clamp percentage between 0 and 100
    }

    private int CalculateOverdueDays()
    {
        DateTime currentDate = DateTime.Now;
        if (currentDate > NextPromotionDate)
        {
            return (int)((currentDate - NextPromotionDate).TotalDays * 2); // Each overdue day equals 2 pixels
        }
        return 0;
    }

    private string NextPromotionDifference(DateTime NextPromotionDate)
    {
        DateTime currentDate = DateTime.Now;
        var diff = (NextPromotionDate - currentDate).Days;

        return diff switch
        {
            > 0 => $"{diff} days until next promotion date",
            < 0 => $"{Math.Abs(diff)} days past your promition date",
            0 => "can promote today"
        };

    }
}

<div class="progress-container" style="position: relative; width: 112px; height: 15px; background-color: #e9ecef;">
    <img src="/images/green.png" alt="Progress" style="height: 100%; width: @ProgressPercentage%;" title="@NextPromotionDifference(NextPromotionDate)" />
    @if (OverdueDays > 0)
    {
        <img src="/images/warning.png" alt="Overdue" style="height: 100%; width: @(OverdueDays)px; position: absolute; left: @ProgressPercentage%;" title="@NextPromotionDifference(NextPromotionDate)" />
    }
</div>
