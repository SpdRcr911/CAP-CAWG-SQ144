@page "/cadet-info"

@inherits CadetSessionComponentBase

@inject IRetrieveDataService<Member> MemberService;

<h3>Cadet Information</h3>

@if (string.IsNullOrEmpty(capid))
{
    <p>No CAPID found. Please log in.</p>
}
else if (cadet == null)
{
    <p>Loading your information...</p>
}
else
{
    <p>Your CAPID: @capid</p>
    <p>Your Name: @cadet.FullName</p>
}

@code
{
    private Member? cadet;

    protected override async Task OnCapidRetrievedAsync()
    {
        if (!string.IsNullOrEmpty(capid))
        {
            cadet = await MemberService.GetAsync(Convert.ToInt32(capid));
        }
    }
}
